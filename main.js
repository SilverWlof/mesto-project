(()=>{"use strict";var e=document.querySelector("#popup-profile"),t=document.querySelector("#popup-place"),r=document.querySelector("#popup-zoom"),n=document.querySelector("#popup__updata-avatar"),o=document.forms.ProfileForm,a=document.forms.CardForm,i=(document.forms.avatarImage,r.querySelector(".popup__zoom-in")),s=r.querySelector(".popup__zoom-description"),c=document.querySelector(".profile"),l=c.querySelector(".profile__name"),u=c.querySelector(".profile__description"),d=c.querySelector(".profile__avatar"),p=n.querySelector("#avatarImage"),m=document.querySelectorAll(".popup__button-close"),v=document.querySelector(".elements");function _(e){var t=Array.from(e.querySelectorAll(".popup__input")),r=e.querySelector(".popup__button-save");f(t,r),t.forEach((function(n){n.addEventListener("input",(function(){var o,a;o=e,(a=n).validity.valid,a.validity.patternMismatch?a.setCustomValidity(a.dataset.errorMassage):a.validity.typeMismatch?a.setCustomValidity(a.dataset.errorMassageUrl):a.setCustomValidity(""),a.validity.valid?function(e,t){var r=t.querySelector(".".concat(e.id,"-error"));e.classList.remove("popup__warning_show"),r.textContent="",r.classList.remove("popup__warning_show")}(a,o):function(e,t,r){var n=t.querySelector(".".concat(e.id,"-error"));e.classList.add("popup__warning_show"),n.classList.add("popup__warning_show"),n.textContent=r}(a,o,a.validationMessage),f(t,r)}))}))}function f(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.removeAttribute("disabled"),t.classList.remove("popup__button-save_disable")):(t.setAttribute("disabled",!0),t.classList.add("popup__button-save_disable"))}var y="";function g(e){e.classList.add("popup_opened"),y=e}function q(e){e.classList.remove("popup_opened")}function S(e){var t=function(e){var t=document.querySelector("#element").content.querySelector(".element").cloneNode(!0),n=t.querySelector(".element__text"),o=t.querySelector(".element__image"),a=(t.querySelector(".element__button-like"),t.querySelector(".element__button-delete"));return n.textContent=e.text,o.alt=e.text,o.src=e.image,o.addEventListener("click",(function(e){i.src=e.target.src,i.alt=e.target.alt,s.textContent=e.target.alt,g(r)})),a.addEventListener("click",(function(e){e.target.closest(".element").remove()})),t}(e);v.prepend(t)}m.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return q(t)}))})),document.addEventListener("keydown",(function(e){"Escape"==e.key&&(q(y),console.log(y.name))})),c.querySelector(".profile__edit-avatar").addEventListener("click",(function(e){g(n)})),c.querySelector(".profile__button-edit").addEventListener("click",(function(){g(e),_(e),o.name.value=l.textContent,o.description.value=u.textContent})),c.querySelector(".profile__button-add-profile").addEventListener("click",(function(){g(t),_(t)})),t.addEventListener("submit",(function(e){e.preventDefault();var r={text:a.placeName.value,image:a.placeImage.value};q(t),e.target.reset(),S(r)})),[{image:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg",text:"Архыз"},{image:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg",text:"Челябинская область"},{image:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg",text:"Иваново"},{image:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg",text:"Камчатка"},{image:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg",text:"Холмогорский район"},{image:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg",text:"Байкал"}].forEach(S),e.addEventListener("submit",(function(t){t.preventDefault(),l.textContent=o.name.value,u.textContent=o.description.value,q(e)})),n.addEventListener("submit",(function(e){e.preventDefault(),d.src=p.value,q(n),e.target.reset()})),v.addEventListener("click",(function(e){e.target.classList.contains("element__button-like")&&event.target.classList.toggle("element__button-like_liked")}))})();